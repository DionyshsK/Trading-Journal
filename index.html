<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pro Trading Journal v25 - Fixed</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-zoom/2.0.1/chartjs-plugin-zoom.min.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: { extend: { colors: { gray: { 900: '#111827', 800: '#1f2937', 700: '#374151', 100: '#f3f4f6' }, brand: { 500: '#6366f1', 600: '#4f46e5' } } } }
        }
    </script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100 text-gray-900 dark:bg-gray-900 dark:text-gray-100 transition-colors duration-200 selection:bg-indigo-500 selection:text-white">

    <div id="auth-container" class="min-h-screen flex items-center justify-center p-4">
        <div class="max-w-md w-full bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 p-8 relative">
            
            <div class="text-center mb-8">
                <h2 class="text-3xl font-extrabold text-gray-900 dark:text-white tracking-tight">Trading Journal</h2>
                <p class="text-sm text-gray-500 dark:text-gray-400 mt-2">Professional Analytics</p>
            </div>

            <form id="login-form" class="space-y-5">
                <div>
                    <label class="block text-sm font-semibold text-gray-600 dark:text-gray-400 mb-1">Email</label>
                    <input type="email" id="login-email" required class="w-full rounded-lg border border-gray-300 dark:border-gray-600 p-2.5 text-gray-900 bg-white dark:bg-gray-700 dark:text-white">
                </div>
                <div class="relative">
                    <label class="block text-sm font-semibold text-gray-600 dark:text-gray-400 mb-1">Password</label>
                    <input type="password" id="login-password" required class="w-full rounded-lg border border-gray-300 dark:border-gray-600 p-2.5 pr-10 text-gray-900 bg-white dark:bg-gray-700 dark:text-white">
                    <button type="button" onclick="window.togglePass('login-password')" class="absolute right-3 top-8 text-gray-400 hover:text-indigo-600"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg></button>
                </div>
                
                <div class="flex justify-end">
                    <button type="button" id="forgot-pass-link" class="text-sm text-indigo-600 hover:text-indigo-500 dark:text-indigo-400">Forgot Password?</button>
                </div>

                <button type="submit" class="w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg shadow-lg transition transform hover:-translate-y-0.5">Sign In</button>
                
                <div class="text-center text-sm pt-2 text-gray-500 dark:text-gray-400">
                    Don't have an account? <button type="button" id="go-to-register" class="font-bold text-indigo-600 hover:underline">Create Account</button>
                </div>
                <p id="login-error" class="hidden text-center text-sm font-bold text-red-500 bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mt-2"></p>
            </form>

            <form id="register-form" class="space-y-4 hidden">
                <div class="grid grid-cols-2 gap-3">
                    <div><label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1">First Name</label><input type="text" id="reg-fname" required class="w-full rounded-lg border border-gray-300 dark:border-gray-600 p-2.5 text-gray-900 bg-white dark:bg-gray-700 dark:text-white"></div>
                    <div><label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1">Last Name</label><input type="text" id="reg-lname" required class="w-full rounded-lg border border-gray-300 dark:border-gray-600 p-2.5 text-gray-900 bg-white dark:bg-gray-700 dark:text-white"></div>
                </div>
                <div><label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1">Username</label><input type="text" id="reg-username" required class="w-full rounded-lg border border-gray-300 dark:border-gray-600 p-2.5 text-gray-900 bg-white dark:bg-gray-700 dark:text-white"></div>
                <div><label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1">Email</label><input type="email" id="reg-email" required class="w-full rounded-lg border border-gray-300 dark:border-gray-600 p-2.5 text-gray-900 bg-white dark:bg-gray-700 dark:text-white"></div>
                
                <div class="relative">
                    <label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1">Password (1 Capital, 1 Number)</label>
                    <input type="password" id="reg-password" required class="w-full rounded-lg border border-gray-300 dark:border-gray-600 p-2.5 pr-10 text-gray-900 bg-white dark:bg-gray-700 dark:text-white">
                    <button type="button" onclick="window.togglePass('reg-password')" class="absolute right-3 top-8 text-gray-400 hover:text-indigo-600"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg></button>
                </div>
                <div class="relative">
                    <label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1">Confirm Password</label>
                    <input type="password" id="reg-confirm" required class="w-full rounded-lg border border-gray-300 dark:border-gray-600 p-2.5 pr-10 text-gray-900 bg-white dark:bg-gray-700 dark:text-white">
                </div>

                <button type="submit" class="w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg shadow-lg mt-4">Sign Up</button>
                
                <div class="text-center text-sm pt-2 text-gray-500 dark:text-gray-400">
                    Already have an account? <button type="button" id="go-to-login" class="font-bold text-indigo-600 hover:underline">Sign In</button>
                </div>
                <p id="reg-error" class="hidden text-center text-sm font-bold text-red-500 bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mt-2"></p>
            </form>

            <form id="forgot-form" class="space-y-4 hidden text-center">
                <h3 class="text-lg font-bold text-gray-900 dark:text-white">Reset Password</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400">Enter your email to receive a reset link.</p>
                <input type="email" id="forgot-email" placeholder="email@example.com" class="w-full rounded-lg border border-gray-300 dark:border-gray-600 p-3 text-gray-900 bg-white dark:bg-gray-700 dark:text-white">
                <button type="submit" class="w-full py-2 bg-indigo-600 text-white rounded-lg font-bold">Send Link</button>
                <button type="button" id="back-from-forgot" class="text-sm text-gray-500 hover:text-gray-800 dark:hover:text-white underline">Back to Login</button>
                <p id="forgot-msg" class="hidden text-sm font-bold p-2 rounded-lg"></p>
            </form>

        </div>
    </div>

    <div id="persona-wizard" class="fixed inset-0 bg-gray-900/95 z-50 flex items-center justify-center hidden">
        <div class="max-w-2xl w-full bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 border dark:border-gray-700 relative fade-in mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between mb-8 px-2"><div class="h-2 flex-1 bg-indigo-600 rounded-full mr-2"></div><div class="h-2 flex-1 bg-gray-200 dark:bg-gray-700 rounded-full mr-2" id="prog-2"></div><div class="h-2 flex-1 bg-gray-200 dark:bg-gray-700 rounded-full mr-2" id="prog-3"></div><div class="h-2 flex-1 bg-gray-200 dark:bg-gray-700 rounded-full" id="prog-4"></div></div>
            <form id="persona-form">
                <div id="p-step-1" class="space-y-6 text-center"><h2 class="text-3xl font-extrabold dark:text-white">Experience?</h2><div class="grid grid-cols-2 gap-4 mt-6"><label class="border p-4 rounded-xl cursor-pointer hover:bg-indigo-50 dark:border-gray-600 dark:hover:bg-gray-700"><input type="radio" name="exp" value="0-1" class="hidden peer"><span class="block font-bold dark:text-white peer-checked:text-indigo-600">0-1 Year</span></label><label class="border p-4 rounded-xl cursor-pointer hover:bg-indigo-50 dark:border-gray-600 dark:hover:bg-gray-700"><input type="radio" name="exp" value="1-3" class="hidden peer"><span class="block font-bold dark:text-white peer-checked:text-indigo-600">1-3 Years</span></label><label class="border p-4 rounded-xl cursor-pointer hover:bg-indigo-50 dark:border-gray-600 dark:hover:bg-gray-700"><input type="radio" name="exp" value="3-5" class="hidden peer"><span class="block font-bold dark:text-white peer-checked:text-indigo-600">3-5 Years</span></label><label class="border p-4 rounded-xl cursor-pointer hover:bg-indigo-50 dark:border-gray-600 dark:hover:bg-gray-700"><input type="radio" name="exp" value="5+" class="hidden peer"><span class="block font-bold dark:text-white peer-checked:text-indigo-600">5+ Years</span></label></div><button type="button" onclick="window.nextPersonaStep(2)" class="mt-8 bg-indigo-600 text-white px-8 py-3 rounded-lg font-bold">Next</button></div>
                <div id="p-step-2" class="hidden-step space-y-6 text-center"><h2 class="text-3xl font-extrabold dark:text-white">Market?</h2><div class="grid grid-cols-2 gap-4 mt-6"><label class="p-4 border rounded-xl hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700 flex items-center space-x-2"><input type="checkbox" value="Forex" class="p-chk"><span class="dark:text-white">Forex</span></label><label class="p-4 border rounded-xl hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700 flex items-center space-x-2"><input type="checkbox" value="Crypto" class="p-chk"><span class="dark:text-white">Crypto</span></label><label class="p-4 border rounded-xl hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700 flex items-center space-x-2"><input type="checkbox" value="Indices" class="p-chk"><span class="dark:text-white">Indices</span></label><label class="p-4 border rounded-xl hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700 flex items-center space-x-2"><input type="checkbox" value="Commodities" class="p-chk"><span class="dark:text-white">Commodities</span></label></div><button type="button" onclick="window.nextPersonaStep(3)" class="mt-8 bg-indigo-600 text-white px-8 py-3 rounded-lg font-bold">Next</button></div>
                <div id="p-step-3" class="hidden-step space-y-6 text-center"><h2 class="text-3xl font-extrabold dark:text-white">Strategies?</h2><div class="grid grid-cols-2 gap-2 mt-6 text-left text-sm h-60 overflow-y-auto"><label class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"><input type="checkbox" value="SMC" class="s-chk mr-2"><span class="dark:text-white">SMC</span></label><label class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"><input type="checkbox" value="Price Action" class="s-chk mr-2"><span class="dark:text-white">Price Action</span></label><label class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"><input type="checkbox" value="Scalping" class="s-chk mr-2"><span class="dark:text-white">Scalping</span></label><label class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"><input type="checkbox" value="Swing" class="s-chk mr-2"><span class="dark:text-white">Swing</span></label><label class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"><input type="checkbox" value="Breakout" class="s-chk mr-2"><span class="dark:text-white">Breakout</span></label><label class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"><input type="checkbox" value="Algo" class="s-chk mr-2"><span class="dark:text-white">Algo</span></label><label class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"><input type="checkbox" value="Elliott" class="s-chk mr-2"><span class="dark:text-white">Elliott Wave</span></label><label class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"><input type="checkbox" value="SupplyDemand" class="s-chk mr-2"><span class="dark:text-white">Supply Demand</span></label><label class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"><input type="checkbox" value="Fundamental" class="s-chk mr-2"><span class="dark:text-white">Fundamental</span></label><label class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"><input type="checkbox" value="Other" class="s-chk mr-2"><span class="dark:text-white">Other</span></label></div><button type="button" onclick="window.nextPersonaStep(4)" class="mt-8 bg-indigo-600 text-white px-8 py-3 rounded-lg font-bold">Next</button></div>
                <div id="p-step-4" class="hidden-step space-y-6 text-center"><h2 class="text-3xl font-extrabold dark:text-white">Why Journal?</h2><div class="space-y-3 mt-6 text-left"><label class="block p-3 border rounded hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700"><input type="radio" name="why" value="Emotions" class="mr-2"><span class="dark:text-white">Master Psychology</span></label><label class="block p-3 border rounded hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700"><input type="radio" name="why" value="Edge" class="mr-2"><span class="dark:text-white">Find My Edge</span></label><label class="block p-3 border rounded hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700"><input type="radio" name="why" value="Risk" class="mr-2"><span class="dark:text-white">Risk Management</span></label><label class="block p-3 border rounded hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700"><input type="radio" name="why" value="Funded" class="mr-2"><span class="dark:text-white">Get Funded</span></label><label class="block p-3 border rounded hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700"><input type="radio" name="why" value="Business" class="mr-2"><span class="dark:text-white">Treat as Business</span></label><input type="text" id="why-other-text" placeholder="Other..." class="w-full border rounded p-2 mt-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white"></div><button type="submit" class="mt-8 w-full bg-emerald-600 text-white px-8 py-3 rounded-lg font-bold shadow-lg">Complete</button></div>
            </form>
        </div>
    </div>

    <div id="app-layout" class="min-h-screen hidden flex flex-col relative">
        <header class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 sticky top-0 z-40">
            <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
                <div class="relative">
                    <button id="menu-btn" class="flex items-center space-x-2 text-gray-700 dark:text-white p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition">
                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                        <span class="font-bold text-lg hidden md:inline">Menu</span>
                    </button>
                    <div id="dropdown-content" class="absolute left-0 mt-3 w-72 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 dropdown-menu hidden-menu z-50 overflow-hidden">
                        <div class="bg-gray-50 dark:bg-gray-900 px-4 py-3 border-b border-gray-200 dark:border-gray-700">
                            <p class="text-xs text-gray-500 uppercase font-semibold">Active Account</p>
                            <p id="menu-current-acc" class="font-bold text-indigo-600 dark:text-indigo-400 truncate text-sm mt-1">No Account</p>
                        </div>
                        <button onclick="window.switchTab('dashboard')" class="w-full text-left px-4 py-3 text-sm text-gray-700 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center transition"><svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg>Dashboard</button>
                        <button onclick="window.switchTab('accounts')" class="w-full text-left px-4 py-3 text-sm text-gray-700 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center transition"><svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>My Accounts</button>
                        <button onclick="window.switchTab('calendar')" class="w-full text-left px-4 py-3 text-sm text-gray-700 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center transition">
                            <svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                            Calendar
                        </button>
                        <button onclick="window.switchTab('profile')" class="w-full text-left px-4 py-3 text-sm text-gray-700 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center transition"><svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>Profile</button>
                        <button id="theme-toggle" class="w-full text-left px-4 py-3 text-sm text-gray-700 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center transition"><svg class="w-5 h-5 mr-3 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>Theme Toggle</button>
                        <button onclick="window.logout()" class="w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center font-semibold transition"><svg class="w-5 h-5 mr-3 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>Logout</button>
                    </div>
                </div>
                <p class="text-sm font-bold text-gray-800 dark:text-white" id="header-name">User</p>
            </div>
        </header>

        <div id="tab-dashboard" class="flex-grow p-4 md:p-8 max-w-7xl mx-auto w-full hidden">
            <div id="no-accounts-msg" class="hidden text-center py-20">
                <div class="inline-block p-6 rounded-full bg-gray-100 dark:bg-gray-800 mb-4"><svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></div>
                <h3 class="text-xl font-bold text-gray-700 dark:text-white">No Trading Accounts</h3>
                <button onclick="window.openAccountWizard()" class="mt-6 bg-indigo-600 text-white px-6 py-2 rounded-lg font-bold shadow hover:bg-indigo-700 transition">Get Started</button>
            </div>

            <div id="dashboard-content" class="hidden space-y-6">
                <div id="funded-stats-container" class="hidden bg-gray-900 text-white p-6 rounded-2xl shadow-xl border border-gray-700 relative overflow-hidden">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 relative z-10 gap-2">
                        <div><h3 class="font-bold text-2xl tracking-tight" id="dash-acc-name">Account</h3><p class="text-indigo-400 text-sm font-medium uppercase tracking-wider" id="dash-prop-name">Prop Firm</p></div>
                        <span id="dash-phase" class="bg-indigo-600 px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-widest shadow-lg">Phase 1</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 relative z-10">
                        <div><div class="flex justify-between text-xs mb-2 text-gray-400 uppercase font-semibold"><span>Target</span><span id="target-val" class="text-white font-mono">...</span></div><div class="w-full bg-gray-800 rounded-full h-3 shadow-inner"><div id="bar-target" class="bg-gradient-to-r from-emerald-400 to-emerald-600 h-3 rounded-full transition-all duration-700 ease-out" style="width: 0%"></div></div></div>
                        <div><div class="flex justify-between text-xs mb-2 text-gray-400 uppercase font-semibold"><span>Max Drawdown</span><span id="mdd-val" class="text-white font-mono">...</span></div><div class="w-full bg-gray-800 rounded-full h-3 shadow-inner"><div id="bar-mdd" class="bg-gradient-to-r from-blue-400 to-blue-600 h-3 rounded-full transition-all duration-700 ease-out" style="width: 0%"></div></div></div>
                        <div><div class="flex justify-between text-xs mb-2 text-gray-400 uppercase font-semibold"><span>Daily Limit</span><span id="ddd-val" class="text-white font-mono">...</span></div><div class="w-full bg-gray-800 rounded-full h-3 shadow-inner"><div id="bar-ddd" class="bg-gradient-to-r from-rose-400 to-rose-600 h-3 rounded-full transition-all duration-700 ease-out" style="width: 0%"></div></div></div>
                    </div>
                </div>

                <div class="bg-white dark:bg-gray-800 p-5 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-gray-800 dark:text-white text-lg">Performance Curve</h3>
                        <div class="flex items-center space-x-2">
                            <span class="text-xs text-gray-500 uppercase font-bold">Zoom:</span>
                            <select id="chart-zoom-level" class="text-xs bg-gray-700 border border-gray-600 rounded-lg p-1.5 text-white focus:ring-2 focus:ring-indigo-500 outline-none cursor-pointer">
                                <option value="0.02">+/- 2%</option>
                                <option value="0.05">+/- 5%</option>
                                <option value="0.10" selected>+/- 10%</option>
                                <option value="0.15">+/- 15%</option>
                            </select>
                        </div>
                    </div>
                    <div class="w-full h-72"><canvas id="growthChart"></canvas></div>
                </div>

                <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="bg-white dark:bg-gray-800 p-5 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700"><p class="text-xs font-semibold text-gray-500 uppercase">Balance</p><p id="metric-balance" class="text-2xl font-extrabold mt-1 text-gray-900 dark:text-white tracking-tight">...</p></div>
                    <div class="bg-white dark:bg-gray-800 p-5 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700"><p class="text-xs font-semibold text-gray-500 uppercase">Net PnL</p><p id="metric-pnl" class="text-2xl font-extrabold mt-1">...</p></div>
                    <div class="bg-white dark:bg-gray-800 p-5 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700"><p class="text-xs font-semibold text-gray-500 uppercase">Win Rate</p><p id="metric-winrate" class="text-2xl font-extrabold mt-1 text-gray-900 dark:text-white">...</p></div>
                    <div class="bg-white dark:bg-gray-800 p-5 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700"><p class="text-xs font-semibold text-gray-500 uppercase">Total Trades</p><p id="metric-trades" class="text-2xl font-extrabold mt-1 text-gray-900 dark:text-white">...</p></div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-1 bg-gray-900 p-6 rounded-2xl border border-gray-700 h-fit sticky top-24 shadow-2xl transition-all duration-300">
                        
                        <div class="flex justify-between items-center cursor-pointer lg:cursor-default" onclick="window.toggleTradeForm()">
                            <h3 class="font-bold text-xl text-white flex items-center">
                                <span class="text-indigo-500 text-2xl mr-2 font-light">+</span> Log Trade
                            </h3>
                            <button id="form-toggle-icon" class="lg:hidden text-gray-400 transform transition-transform duration-200">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                        </div>
                        
                        <div id="trade-form-container" class="hidden lg:block mt-5">
                            <form id="trade-form" class="space-y-4">
                                <input type="date" id="t-date" required class="w-full rounded-lg border border-gray-600 bg-gray-700 text-white p-3 outline-none transition focus:ring-2 focus:ring-indigo-500">
                                
                                <div class="grid grid-cols-3 gap-2">
                                    <input type="text" id="t-symbol" placeholder="SYMBOL" class="w-full rounded-lg border border-gray-600 bg-gray-700 text-white p-2.5 text-sm uppercase font-bold text-center outline-none focus:border-indigo-500">
                                    <input type="number" step="0.01" id="t-size" placeholder="Lots" required class="w-full rounded-lg border border-indigo-500/50 bg-gray-700 text-white p-2.5 font-bold text-center outline-none focus:border-indigo-500 calc-trigger">
                                    <select id="t-type" class="w-full rounded-lg border border-gray-600 bg-gray-700 text-white p-2.5 text-sm outline-none cursor-pointer calc-trigger"><option value="Long">Buy â†—</option><option value="Short">Sell â†˜</option></select>
                                </div>
                                
                                <p class="text-[10px] font-bold text-gray-500 uppercase text-center tracking-widest mt-1">EXECUTION</p>
                                
                                <div class="grid grid-cols-3 gap-2">
                                    <input type="number" step="0.00001" id="t-entry" placeholder="Entry" required class="w-full rounded-lg border border-gray-600 bg-gray-700 text-white p-2 text-sm outline-none focus:border-indigo-500 calc-trigger">
                                    <input type="number" step="0.00001" id="t-sl" placeholder="Stop Loss" class="w-full rounded-lg border border-red-900/60 bg-gray-700 text-white p-2 text-sm outline-none focus:border-red-500 calc-trigger">
                                    <input type="number" step="0.00001" id="t-tp" placeholder="Take Profit" class="w-full rounded-lg border border-green-900/60 bg-gray-700 text-white p-2 text-sm outline-none focus:border-green-500 calc-trigger">
                                </div>
                                
                                <div>
                                    <label class="text-[10px] text-gray-400 block mb-1 uppercase font-bold ml-1">Actual Exit Price</label>
                                    <input type="number" step="0.00001" id="t-exit" placeholder="0.00000" class="w-full rounded-lg border border-gray-600 bg-gray-700 text-white p-3 outline-none focus:border-indigo-500 calc-trigger">
                                </div>
                                
                                <div class="grid grid-cols-3 gap-2 items-end">
                                    <div><label class="text-[10px] text-gray-500 block mb-1 uppercase font-bold text-center">R:R</label><div id="disp-r-multiple" class="w-full rounded-lg bg-gray-800 border border-gray-700 text-indigo-400 p-2.5 text-center text-sm font-bold">--</div></div>
                                    <div><label class="text-[10px] text-gray-500 block mb-1 uppercase font-bold text-center">Fees</label><input type="number" step="0.01" id="t-fees" placeholder="-0.00" class="w-full rounded-lg border border-gray-600 bg-gray-700 text-gray-300 p-2.5 text-center text-sm outline-none focus:border-orange-500 calc-trigger"></div>
                                    <div><label class="text-[10px] text-gray-500 block mb-1 uppercase font-bold text-center">PnL ($)</label><input type="text" id="t-net-pnl" placeholder="0.00" readonly class="w-full rounded-lg bg-gray-900 border border-gray-600 text-white p-2.5 font-mono cursor-not-allowed text-center font-bold text-lg"></div>
                                </div>
                                
                                <div class="text-center"><span id="disp-risk-pips" class="text-xs text-gray-500 font-mono">Risk: -- pips</span></div>
                                
                                <div class="bg-gray-800 p-3 rounded-lg border border-gray-600 mt-2">
                                    <div class="flex justify-between mb-2"><label class="text-xs font-bold text-gray-400 uppercase">Confidence</label><span id="conf-val" class="text-green-500 font-bold">5</span></div>
                                    <input type="range" id="t-conf" min="1" max="5" value="5" class="w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer">
                                </div>
                                
                                <textarea id="t-notes" rows="2" placeholder="Thoughts, feelings, strategy..." class="w-full rounded-lg border border-gray-600 bg-gray-700 text-white p-3 text-sm outline-none focus:border-indigo-500"></textarea>
                                
                                <label for="t-img" class="flex flex-col items-center justify-center w-full h-12 border-2 border-gray-600 border-dashed rounded-lg cursor-pointer bg-gray-800 hover:bg-gray-700 transition">
                                    <span class="text-xs text-gray-500" id="file-name-display">Upload Screenshot</span>
                                    <input id="t-img" type="file" class="hidden" accept="image/*" />
                                </label>
                                
                                <button type="submit" id="add-trade-btn" class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg shadow-lg transition">Add Trade</button>
                            </form>
                        </div>
                    </div>

                    <div class="lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col">
                        <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 flex flex-col md:flex-row gap-4 justify-between items-center">
                            <h3 class="font-bold text-gray-800 dark:text-white">Trade History</h3>
                            <div class="flex gap-2">
                                <select id="filter-symbol" onchange="window.applyFilters()" class="text-xs bg-white dark:bg-gray-700 border dark:border-gray-600 rounded-lg p-2 outline-none dark:text-white">
                                    <option value="ALL">All Symbols</option>
                                    </select>
                                
                                <select id="filter-side" onchange="window.applyFilters()" class="text-xs bg-white dark:bg-gray-700 border dark:border-gray-600 rounded-lg p-2 outline-none dark:text-white">
                                    <option value="ALL">All Sides</option>
                                    <option value="Long">Long</option>
                                    <option value="Short">Short</option>
                                </select>

                                <select id="filter-result" onchange="window.applyFilters()" class="text-xs bg-white dark:bg-gray-700 border dark:border-gray-600 rounded-lg p-2 outline-none dark:text-white">
                                    <option value="ALL">All Results</option>
                                    <option value="Win">Winners</option>
                                    <option value="Loss">Losers</option>
                                </select>
                            </div>
                        </div>
                        <div class="overflow-x-auto max-h-[800px] scroll-shadow flex-grow">
                            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                <thead class="bg-gray-50 dark:bg-gray-700 sticky top-0 z-10">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Date</th>
                                        <th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Symbol</th>
                                        <th class="px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider">R:R</th>
                                        <th class="px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider">PnL</th>
                                        <th class="px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="trade-list" class="divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="tab-accounts" class="hidden flex-grow p-4 md:p-8 max-w-4xl mx-auto w-full">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white">My Trading Accounts</h2>
                <button onclick="window.openAccountWizard()" class="bg-indigo-600 text-white px-5 py-2.5 rounded-lg font-bold hover:bg-indigo-700 shadow-lg transition flex items-center"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>New Account</button>
            </div>
            <div id="accounts-list" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>
        </div>

        <div id="tab-calendar" class="hidden flex-grow p-4 md:p-8 max-w-7xl mx-auto w-full">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Trading Calendar</h2>
            
            <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center mb-6">
                    <button onclick="window.changeMonth(-1)" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition">
                        <svg class="w-6 h-6 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                    </button>
                    <h3 id="cal-month-year" class="text-xl font-extrabold text-gray-900 dark:text-white uppercase tracking-wide">Month Year</h3>
                    <button onclick="window.changeMonth(1)" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition">
                        <svg class="w-6 h-6 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </button>
                </div>

                <div class="grid grid-cols-7 text-center mb-2">
                    <div class="text-xs font-bold text-gray-400 uppercase py-2">Sun</div>
                    <div class="text-xs font-bold text-gray-400 uppercase py-2">Mon</div>
                    <div class="text-xs font-bold text-gray-400 uppercase py-2">Tue</div>
                    <div class="text-xs font-bold text-gray-400 uppercase py-2">Wed</div>
                    <div class="text-xs font-bold text-gray-400 uppercase py-2">Thu</div>
                    <div class="text-xs font-bold text-gray-400 uppercase py-2">Fri</div>
                    <div class="text-xs font-bold text-gray-400 uppercase py-2">Sat</div>
                </div>

                <div id="calendar-grid" class="grid grid-cols-7 gap-1 md:gap-2 auto-rows-fr">
                    </div>
            </div>
        </div>

        <div id="tab-profile" class="hidden flex-grow p-4 md:p-8 max-w-2xl mx-auto w-full">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">User Profile</h2>
            <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700">
                <form id="profile-form" class="space-y-6">
                    <div class="grid grid-cols-2 gap-4">
                        <div><label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1">First Name</label><input type="text" id="prof-fname" class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white p-3"></div>
                        <div><label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1">Last Name</label><input type="text" id="prof-lname" class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white p-3"></div>
                    </div>
                    <div><label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1">Email</label><input type="email" id="prof-email" readonly class="w-full rounded-lg bg-gray-100 dark:bg-gray-600 border border-gray-300 dark:border-gray-500 text-gray-500 dark:text-gray-300 p-3 cursor-not-allowed"></div>
                    <div><label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1">Date of Birth</label><input type="date" id="prof-dob" class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white p-3"></div>
                    <div><label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1">Bio</label><textarea id="prof-bio" rows="3" class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white p-3"></textarea></div>
                    <div class="border-t border-gray-200 dark:border-gray-700 my-6"></div>
                    <div>
                        <h4 class="font-bold text-lg text-gray-900 dark:text-white mb-4">Trader DNA</h4>
                        <div class="mb-4"><label class="block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1">Experience</label><select id="prof-exp" class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white p-3"><option value="0-1">Newbie (0-1 Year)</option><option value="1-3">Amateur (1-3 Years)</option><option value="3-5">Pro (3-5 Years)</option><option value="5+">Veteran (5+ Years)</option></select></div>
                        <div class="mb-4"><label class="block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">Markets (Max 2)</label><div class="flex flex-wrap gap-4 text-sm" id="prof-markets"><label class="flex items-center space-x-2 text-gray-700 dark:text-gray-200"><input type="checkbox" value="Forex" class="rounded text-indigo-600 market-chk"><span>Forex</span></label><label class="flex items-center space-x-2 text-gray-700 dark:text-gray-200"><input type="checkbox" value="Crypto" class="rounded text-indigo-600 market-chk"><span>Crypto</span></label><label class="flex items-center space-x-2 text-gray-700 dark:text-gray-200"><input type="checkbox" value="Indices" class="rounded text-indigo-600 market-chk"><span>Indices</span></label><label class="flex items-center space-x-2 text-gray-700 dark:text-gray-200"><input type="checkbox" value="Commodities" class="rounded text-indigo-600 market-chk"><span>Commodities</span></label></div></div>
                        <div>
                            <label class="block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">Strategies (Max 3)</label>
                            <div class="relative"><button type="button" id="strat-dropdown-btn" class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-left flex justify-between items-center p-3" onclick="document.getElementById('strat-list').classList.toggle('hidden')"><span>Select...</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button><div id="strat-list" class="hidden absolute z-10 w-full bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 mt-1 rounded-lg shadow-xl max-h-48 overflow-y-auto p-3"><div class="grid grid-cols-1 gap-2 text-sm"><label class="flex items-center space-x-2 text-gray-700 dark:text-gray-200"><input type="checkbox" value="SMC" class="rounded text-indigo-600 strat-chk"><span>SMC / ICT</span></label><label class="flex items-center space-x-2 text-gray-700 dark:text-gray-200"><input type="checkbox" value="Price Action" class="rounded text-indigo-600 strat-chk"><span>Price Action</span></label><label class="flex items-center space-x-2 text-gray-700 dark:text-gray-200"><input type="checkbox" value="Breakout" class="rounded text-indigo-600 strat-chk"><span>Breakout</span></label><label class="flex items-center space-x-2 text-gray-700 dark:text-gray-200"><input type="checkbox" value="Scalping" class="rounded text-indigo-600 strat-chk"><span>Scalping</span></label><label class="flex items-center space-x-2 text-gray-700 dark:text-gray-200"><input type="checkbox" value="Swing" class="rounded text-indigo-600 strat-chk"><span>Swing</span></label><label class="flex items-center space-x-2 text-gray-700 dark:text-gray-200"><input type="checkbox" value="SupplyDemand" class="rounded text-indigo-600 strat-chk"><span>Supply & Demand</span></label><label class="flex items-center space-x-2 text-gray-700 dark:text-gray-200"><input type="checkbox" value="Algo" class="rounded text-indigo-600 strat-chk"><span>Algorithmic</span></label></div></div></div>
                        </div>
                        <button type="submit" class="mt-6 bg-indigo-600 text-white px-6 py-2.5 rounded-lg font-bold hover:bg-indigo-700 transition">Save Changes</button>
                    </div>
                    <div class="border-t border-gray-200 dark:border-gray-700 my-6"></div>
                    <div><h4 class="font-bold text-lg text-gray-900 dark:text-white mb-4">Account Security</h4><button id="prof-reset-pass" class="bg-gray-100 border border-gray-300 dark:bg-gray-700 dark:border-gray-600 px-4 py-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-white text-sm transition">Send Password Reset Email</button></div>
                    <div class="pt-6"><h4 class="font-bold text-lg text-red-500 mb-2">Danger Zone</h4><button onclick="window.deleteUserProfile()" class="bg-red-50 border border-red-200 text-red-600 px-4 py-2 rounded-lg hover:bg-red-100 text-sm font-bold transition">Delete Entire Profile</button></div>
                </form>
            </div>
        </div>
    </div>

    <div id="account-wizard" class="fixed inset-0 bg-gray-900/90 backdrop-blur-sm z-50 flex items-center justify-center hidden">
    <div class="max-w-md w-full bg-gray-800 rounded-xl shadow-2xl border border-gray-700 p-6 relative fade-in">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-bold text-white">Setup Account</h2>
            <button onclick="window.closeAccountWizard()" class="text-gray-400 hover:text-white">&times;</button>
        </div>

        <div id="aw-step-1" class="space-y-3">
            <button onclick="window.selectMarketType('Crypto')" class="w-full text-left p-4 bg-gray-700 rounded-lg hover:bg-gray-600 border border-gray-600 text-white font-semibold transition">â‚¿ Crypto <span class="text-xs text-gray-400 block font-normal">Live Execution</span></button>
            <button onclick="window.selectMarketType('Forex')" class="w-full text-left p-4 bg-gray-700 rounded-lg hover:bg-gray-600 border border-gray-600 text-white font-semibold transition">ðŸ’± Forex / Commodities <span class="text-xs text-gray-400 block font-normal">Funded & Live Options</span></button>
        </div>

        <div id="aw-step-2" class="hidden-step">
            <form id="wiz-form" class="space-y-4">
                <div>
                    <input type="text" id="wiz-name" placeholder="Account Name" required class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 outline-none">
                </div>
                
                <div class="grid grid-cols-2 gap-3">
                    <button type="button" id="type-live" onclick="window.setWizType('Live')" class="py-2.5 rounded-lg font-bold text-sm transition bg-indigo-600 text-white shadow-lg">Live</button>
                    <button type="button" id="type-funded" onclick="window.setWizType('Funded')" class="py-2.5 rounded-lg font-bold text-sm transition bg-transparent border border-gray-600 text-gray-400 hover:text-white">Funded</button>
                </div>

                <div>
                    <input type="number" id="wiz-balance" placeholder="Initial Balance" required class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 outline-none">
                </div>

                <div id="wiz-funded-opts" class="hidden-step space-y-3 pt-2 border-t border-gray-700">
                    <input type="text" id="wiz-prop" placeholder="Prop Firm Name" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-2.5 text-sm text-white">
                    <div class="flex gap-2">
                        <select id="wiz-challenge-type" onchange="window.togglePhaseInputs()" class="bg-gray-700 border border-gray-600 rounded-lg p-2 text-sm text-white flex-1"><option value="2step">2-Step</option><option value="1step">1-Step</option></select>
                        <input type="number" id="wiz-daily-dd" placeholder="Daily DD %" class="bg-gray-700 border border-gray-600 rounded-lg p-2 text-sm text-white w-24">
                        <input type="number" id="wiz-total-dd" placeholder="Max DD %" class="bg-gray-700 border border-gray-600 rounded-lg p-2 text-sm text-white w-24">
                    </div>
                    <div class="grid grid-cols-2 gap-2">
                        <input type="number" id="wiz-target-p1" placeholder="Phase 1 Target %" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-2 text-sm text-white">
                        <input type="number" id="wiz-target-p2" placeholder="Phase 2 Target %" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-2 text-sm text-white">
                    </div>
                </div>

                <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg shadow-lg shadow-indigo-900/30 transition mt-2">Create</button>
            </form>
        </div>
    </div>
</div>

    <div id="withdraw-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center hidden">
        <div class="max-w-sm w-full bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-200 dark:border-gray-700 relative fade-in">
            <button onclick="document.getElementById('withdraw-modal').classList.add('hidden')" class="absolute top-4 right-4 text-gray-400 hover:text-white">&times;</button>
            <h3 class="text-xl font-bold mb-4 dark:text-white flex items-center"><svg class="w-6 h-6 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> Request Payout</h3>
            <p class="text-sm text-gray-500 mb-4">Available profits only. Balance cannot drop below initial.</p>
            <form id="withdraw-form" class="space-y-4">
                <input type="number" step="0.01" id="w-amount" placeholder="Amount ($)" required class="w-full rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-white p-3 font-bold text-lg">
                <p id="w-max-msg" class="text-xs text-indigo-400 font-bold text-right">Max: $0.00</p>
                <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg shadow-lg">Confirm Withdrawal</button>
            </form>
        </div>
    </div>
    
    <div id="details-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-2xl max-w-2xl w-full p-6 shadow-2xl border border-gray-200 dark:border-gray-700 relative max-h-[90vh] overflow-y-auto">
            <button onclick="document.getElementById('details-modal').classList.add('hidden')" class="absolute top-4 right-4 text-gray-400 hover:text-gray-800 dark:hover:text-white transition bg-gray-100 dark:bg-gray-700 rounded-full p-1"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
            <h3 class="text-2xl font-extrabold mb-6 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-3">Trade Analysis</h3>
            <div id="modal-content" class="space-y-5 text-gray-700 dark:text-gray-300"></div>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>